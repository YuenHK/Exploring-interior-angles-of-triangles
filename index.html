<!doctype html>
<html lang="zh-TW" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¸‰è§’å½¢å…§è§’æ¢ç´¢</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    * {
      font-family: 'Noto Sans TC', sans-serif;
    }
    @keyframes pulse-glow {
      0%, 100% { filter: drop-shadow(0 0 8px rgba(255, 107, 107, 0.6)); }
      50% { filter: drop-shadow(0 0 16px rgba(255, 107, 107, 0.9)); }
    }
    .walker-glow {
      animation: pulse-glow 1.5s ease-in-out infinite;
    }
    .draggable-vertex {
      transition: r 0.2s;
      cursor: grab;
    }
    .draggable-vertex:hover {
      r: 14;
      filter: drop-shadow(0 0 8px rgba(255, 107, 107, 0.8));
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full m-0 p-0 overflow-auto">
  <div id="app-wrapper" class="w-full h-full min-h-full bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-900">
   <div class="w-full max-w-6xl mx-auto p-6"><!-- Header -->
    <div class="text-center mb-6">
     <h1 id="main-title" class="text-3xl font-bold text-white mb-2">ğŸ“ ä¸‰è§’å½¢å…§è§’æ¢ç´¢</h1>
     <p id="instruction-text" class="text-slate-300">æ‹–æ‹½ç´…è‰²åœ“é»æ”¹è®Šä¸‰è§’å½¢å½¢ç‹€ï¼Œæˆ–é»æ“Šã€Œä¸‹ä¸€æ­¥ã€è§€å¯Ÿå…§è§’å¤§å°ï¼</p>
    </div><!-- Main Layout: Side Panels with Canvas -->
    <div class="flex gap-4 mb-6"><!-- Left Panel: Current Status -->
     <div class="w-56 bg-slate-800/50 rounded-2xl p-4 backdrop-blur-sm border border-slate-700/50 h-fit">
      <h3 class="text-amber-400 font-bold mb-3 flex items-center gap-2"><span>ğŸ“</span> ç›®å‰ç‹€æ…‹</h3>
      <p id="status-text" class="text-slate-200 text-sm leading-relaxed">è§€å¯Ÿé ‚é» A çš„å…§è§’ï¼</p>
     </div><!-- Main Canvas Area -->
     <div class="flex-1 bg-slate-800/50 rounded-2xl p-6 backdrop-blur-sm border border-slate-700/50">
      <svg id="triangle-svg" viewbox="0 0 500 400" class="w-full h-auto" style="touch-action: none;"><!-- Floor pattern --> <defs>
        <pattern id="grid" width="20" height="20" patternunits="userSpaceOnUse">
         <path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(148, 163, 184, 0.1)" stroke-width="1" />
        </pattern>
       </defs> <!-- Grid background --> <rect width="500" height="400" fill="url(#grid)" /> <!-- Triangle edges --> <polygon id="triangle-path" points="250,76 410,310 90,310" fill="none" stroke="#fbbf24" stroke-width="8" stroke-linecap="round" stroke-linejoin="round" opacity="0.8" pointer-events="none" /> <!-- Interior angle arcs and labels --> <g id="angle-arcs" pointer-events="none"></g> <!-- Draggable vertices --> <circle id="vertex-a" cx="250" cy="76" r="10" fill="#ff6b6b" stroke="#fff" stroke-width="2" class="draggable-vertex" /> <circle id="vertex-b" cx="410" cy="310" r="10" fill="#ff6b6b" stroke="#fff" stroke-width="2" class="draggable-vertex" /> <circle id="vertex-c" cx="90" cy="310" r="10" fill="#ff6b6b" stroke="#fff" stroke-width="2" class="draggable-vertex" /> <!-- Vertex labels --> <text id="label-a" x="250" y="56" text-anchor="middle" fill="#f8fafc" font-size="16" font-weight="bold" pointer-events="none">
        A
       </text> <text id="label-b" x="430" y="320" text-anchor="start" fill="#f8fafc" font-size="16" font-weight="bold" pointer-events="none">
        B
       </text> <text id="label-c" x="70" y="320" text-anchor="end" fill="#f8fafc" font-size="16" font-weight="bold" pointer-events="none">
        C
       </text> <!-- Walker - Cute Cartoon Character -->
<g id="walker" transform="translate(250, 76)" pointer-events="none" class="walker-glow">
  <image 
    href="https://i.imgur.com/xR6lY2Y.png" 
    x="-20" 
    y="-20" 
    width="40" 
    height="40" 
  />
</g>
           <!-- Angle display --> <g id="angle-display" style="display: none;" pointer-events="none">
        <rect x="180" y="160" width="140" height="60" rx="10" fill="rgba(255, 107, 107, 0.9)" />
        <text id="angle-text" x="250" y="198" text-anchor="middle" fill="white" font-size="24" font-weight="bold">
         å…§è§’ 60Â°
        </text>
       </g>
      </svg>
     </div><!-- Right Panel: Angle Records -->
     <div class="w-56 bg-slate-800/50 rounded-2xl p-4 backdrop-blur-sm border border-slate-700/50 h-fit">
      <h3 class="text-amber-400 font-bold mb-3 flex items-center gap-2"><span>ğŸ“</span> å…§è§’è¨˜éŒ„</h3>
      <div id="angle-records" class="space-y-2 text-sm">
       <div class="flex justify-between text-slate-400"><span>é ‚é» Aï¼š</span> <span id="angle-a" class="text-amber-400 font-semibold">â€”</span>
       </div>
       <div class="flex justify-between text-slate-400"><span>é ‚é» Bï¼š</span> <span id="angle-b" class="text-amber-400 font-semibold">â€”</span>
       </div>
       <div class="flex justify-between text-slate-400"><span>é ‚é» Cï¼š</span> <span id="angle-c" class="text-amber-400 font-semibold">â€”</span>
       </div>
       <div class="border-t border-slate-600 pt-2 mt-2 flex justify-between font-bold"><span class="text-amber-400">å…§è§’å’Œï¼š</span> <span id="total-angle" class="text-amber-400">â€”</span>
       </div>
      </div>
     </div>
    </div><!-- Controls -->
    <div class="flex justify-center gap-4 mb-6"><button id="prev-btn" class="px-6 py-3 bg-slate-600 hover:bg-slate-500 text-white rounded-xl font-medium transition-all disabled:opacity-40 disabled:cursor-not-allowed flex items-center gap-2"> <span>â—€</span> ä¸Šä¸€æ­¥ </button> <button id="next-btn" class="px-8 py-3 bg-amber-500 hover:bg-amber-400 text-slate-900 rounded-xl font-bold transition-all shadow-lg hover:shadow-amber-500/30 flex items-center gap-2"> ä¸‹ä¸€æ­¥ <span>â–¶</span> </button> <button id="reset-btn" class="px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-xl font-medium transition-all flex items-center gap-2"> <span>â†º</span> é‡ç½® </button>
    </div><!-- Discovery Box -->
    <div id="discovery-box" class="max-w-2xl mx-auto bg-gradient-to-r from-emerald-600/20 to-teal-600/20 rounded-xl p-4 border border-emerald-500/30" style="display: none;">
     <h3 class="text-emerald-400 font-bold mb-2 flex items-center gap-2"><span>ğŸ’¡</span> ç™¼ç¾ï¼</h3>
     <p class="text-slate-200">ä¸‰è§’å½¢ä¸‰å€‹å…§è§’çš„ç¸½å’Œæ˜¯ <strong class="text-amber-400">180Â°</strong>ï¼</p>
     <p class="text-slate-300 text-sm mt-2">é€™æ˜¯<strong class="text-emerald-400">ä¸‰è§’å½¢å…§è§’å’Œå®šç†</strong>ï¼šä»»ä½•ä¸‰è§’å½¢çš„å…§è§’å’Œæ°¸é ç­‰æ–¼ 180Â°ï¼</p>
    </div><!-- Educational Note -->
    <div class="mt-6 text-center text-slate-400 text-sm">
     <p>ğŸ’¡ æç¤ºï¼šæ‹–æ‹½ç´…è‰²åœ“é»æ”¹è®Šä¸‰è§’å½¢ï¼Œå…§è§’æ•¸å€¼æœƒå³æ™‚æ›´æ–°ã€‚ä¸‰è§’å½¢çš„å…§è§’å’Œæ°¸é æ˜¯ 180Â°ï¼</p>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      main_title: 'ğŸ“ ä¸‰è§’å½¢å…§è§’æ¢ç´¢',
      instruction_text: 'æ‹–æ‹½ç´…è‰²åœ“é»æ”¹è®Šä¸‰è§’å½¢å½¢ç‹€ï¼Œæˆ–é»æ“Šã€Œä¸‹ä¸€æ­¥ã€è§€å¯Ÿå…§è§’å¤§å°ï¼',
      primary_color: '#fbbf24',
      secondary_color: '#1e293b',
      text_color: '#f8fafc',
      accent_color: '#ff6b6b',
      surface_color: '#334155'
    };

    // Triangle configuration - mutable (equilateral triangle by default)
    let vertices = {
      A: { x: 250, y: 76 },
      B: { x: 410, y: 310 },
      C: { x: 90, y: 310 }
    };

    // Animation states
    const states = [
      { position: 'A', status: 'è§€å¯Ÿé ‚é» A çš„å…§è§’ï¼', action: 'start' },
      { position: 'A-angle', status: 'é ‚é» A çš„å…§è§’', action: 'angle', vertex: 'A' },
      { position: 'turn-B', status: 'ç§»å‹•åˆ°é ‚é» B...', action: 'turn', nextVertex: 'B' },
      { position: 'B', status: 'ç§»å‹•åˆ°é ‚é» Bï¼Œè§€å¯Ÿé€™è£¡çš„å…§è§’ã€‚', action: 'arrive' },
      { position: 'B-angle', status: 'é ‚é» B çš„å…§è§’', action: 'angle', vertex: 'B' },
      { position: 'turn-C', status: 'ç§»å‹•åˆ°é ‚é» C...', action: 'turn', nextVertex: 'C' },
      { position: 'C', status: 'ç§»å‹•åˆ°é ‚é» Cï¼Œè§€å¯Ÿé€™è£¡çš„å…§è§’ã€‚', action: 'arrive' },
      { position: 'C-angle', status: 'é ‚é» C çš„å…§è§’', action: 'angle', vertex: 'C' },
      { position: 'turn-A', status: 'è¿”å›èµ·é»...', action: 'turn', nextVertex: 'A' },
      { position: 'complete', status: 'ğŸ‰ è¿”å›èµ·é»ï¼Œè§€å¯Ÿä¸‰å€‹å…§è§’çš„ç¸½å’Œã€‚', action: 'complete' }
    ];

    let currentStep = 0;
    let currentVertex = 'A';
    let recordedAngles = { A: null, B: null, C: null };
    let isDragging = false;
    let draggedVertex = null;
    let showingArcs = false;
    let activeArcsVertices = new Set(); // Track which vertices should show arcs

    const svg = document.getElementById('triangle-svg');
    const trianglePath = document.getElementById('triangle-path');
    const vertexA = document.getElementById('vertex-a');
    const vertexB = document.getElementById('vertex-b');
    const vertexC = document.getElementById('vertex-c');
    const walker = document.getElementById('walker');
    const angleDisplay = document.getElementById('angle-display');
    const angleText = document.getElementById('angle-text');
    const statusText = document.getElementById('status-text');
    const discoveryBox = document.getElementById('discovery-box');
    const angleArcs = document.getElementById('angle-arcs');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const resetBtn = document.getElementById('reset-btn');

    // Drag and drop functionality
    function getSVGCoordinates(event) {
      const rect = svg.getBoundingClientRect();
      const x = (event.clientX - rect.left) * (500 / rect.width);
      const y = (event.clientY - rect.top) * (400 / rect.height);
      return { x, y };
    }

    function updateTrianglePath() {
      trianglePath.setAttribute('points', `${vertices.A.x},${vertices.A.y} ${vertices.B.x},${vertices.B.y} ${vertices.C.x},${vertices.C.y}`);
      vertexA.setAttribute('cx', vertices.A.x);
      vertexA.setAttribute('cy', vertices.A.y);
      vertexB.setAttribute('cx', vertices.B.x);
      vertexB.setAttribute('cy', vertices.B.y);
      vertexC.setAttribute('cx', vertices.C.x);
      vertexC.setAttribute('cy', vertices.C.y);
      updateVertexLabels();
    }

    function updateVertexLabels() {
      const labelA = document.getElementById('label-a');
      const labelB = document.getElementById('label-b');
      const labelC = document.getElementById('label-c');
      
      labelA.setAttribute('x', vertices.A.x);
      labelA.setAttribute('y', vertices.A.y - 20);
      labelB.setAttribute('x', vertices.B.x + 20);
      labelB.setAttribute('y', vertices.B.y + 10);
      labelC.setAttribute('x', vertices.C.x - 20);
      labelC.setAttribute('y', vertices.C.y + 10);
    }

    function calculateAngle(vertex) {
      const v = vertices[vertex];
      let v1, v2;
      
      if (vertex === 'A') {
        v1 = { x: vertices.B.x - v.x, y: vertices.B.y - v.y };
        v2 = { x: vertices.C.x - v.x, y: vertices.C.y - v.y };
      } else if (vertex === 'B') {
        v1 = { x: vertices.C.x - v.x, y: vertices.C.y - v.y };
        v2 = { x: vertices.A.x - v.x, y: vertices.A.y - v.y };
      } else {
        v1 = { x: vertices.A.x - v.x, y: vertices.A.y - v.y };
        v2 = { x: vertices.B.x - v.x, y: vertices.B.y - v.y };
      }
      
      const dot = v1.x * v2.x + v1.y * v2.y;
      const mag1 = Math.sqrt(v1.x * v1.x + v1.y * v1.y);
      const mag2 = Math.sqrt(v2.x * v2.x + v2.y * v2.y);
      const cos = dot / (mag1 * mag2);
      const angle = Math.acos(Math.max(-1, Math.min(1, cos))) * 180 / Math.PI;
      
      return Math.round(angle);
    }

    function drawInteriorAngle(vertex, angle) {
      const arcId = `arc-${vertex}`;
      let existingArc = document.getElementById(arcId);
      if (existingArc) {
        existingArc.remove();
      }
      
      const pos = vertices[vertex];
      const arc = document.createElementNS('http://www.w3.org/2000/svg', 'g');
      arc.id = arcId;
      
      let v1, v2;
      if (vertex === 'A') {
        v1 = { x: vertices.B.x - pos.x, y: vertices.B.y - pos.y };
        v2 = { x: vertices.C.x - pos.x, y: vertices.C.y - pos.y };
      } else if (vertex === 'B') {
        v1 = { x: vertices.C.x - pos.x, y: vertices.C.y - pos.y };
        v2 = { x: vertices.A.x - pos.x, y: vertices.A.y - pos.y };
      } else {
        v1 = { x: vertices.A.x - pos.x, y: vertices.A.y - pos.y };
        v2 = { x: vertices.B.x - pos.x, y: vertices.B.y - pos.y };
      }
      
      const angle1 = Math.atan2(v1.y, v1.x) * 180 / Math.PI;
      const angle2 = Math.atan2(v2.y, v2.x) * 180 / Math.PI;
      
      let startAngle = angle1;
      let endAngle = angle2;
      let diff = endAngle - startAngle;
      if (diff < 0) diff += 360;
      if (diff > 180) {
        [startAngle, endAngle] = [endAngle, startAngle];
      }

      const radius = 35;
      const startRad = (startAngle * Math.PI) / 180;
      const endRad = (endAngle * Math.PI) / 180;
      
      const x1 = pos.x + radius * Math.cos(startRad);
      const y1 = pos.y + radius * Math.sin(startRad);
      const x2 = pos.x + radius * Math.cos(endRad);
      const y2 = pos.y + radius * Math.sin(endRad);
      
      const largeArc = angle > 180 ? 1 : 0;
      const pathData = `M ${x1} ${y1} A ${radius} ${radius} 0 ${largeArc} 1 ${x2} ${y2}`;
      
      const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      path.setAttribute('d', pathData);
      path.setAttribute('fill', 'none');
      path.setAttribute('stroke', '#60a5fa');
      path.setAttribute('stroke-width', '3');
      path.setAttribute('opacity', '0.9');
      
      const triangleCenter = {
        x: (vertices.A.x + vertices.B.x + vertices.C.x) / 3,
        y: (vertices.A.y + vertices.B.y + vertices.C.y) / 3
      };
      const dirToCenter = {
        x: triangleCenter.x - pos.x,
        y: triangleCenter.y - pos.y
      };
      const angleToCenter = Math.atan2(dirToCenter.y, dirToCenter.x) * 180 / Math.PI;
      const labelDist = 48;
      const labelRad = (angleToCenter * Math.PI) / 180;
      
      const labelX = pos.x + labelDist * Math.cos(labelRad);
      const labelY = pos.y + labelDist * Math.sin(labelRad);
      
      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
      text.setAttribute('x', labelX);
      text.setAttribute('y', labelY);
      text.setAttribute('text-anchor', 'middle');
      text.setAttribute('dominant-baseline', 'middle');
      text.setAttribute('fill', '#fbbf24');
      text.setAttribute('font-size', '22');
      text.setAttribute('font-weight', 'bold');
      text.setAttribute('letter-spacing', '0.5');
      text.setAttribute('paint-order', 'stroke');
      text.setAttribute('stroke', '#1e293b');
      text.setAttribute('stroke-width', '4');
      text.setAttribute('stroke-linejoin', 'round');
      text.textContent = `${angle}Â°`;
      
      arc.appendChild(path);
      arc.appendChild(text);
      angleArcs.appendChild(arc);
    }

    function redrawAllActiveArcs() {
      angleArcs.innerHTML = '';
      recordedAngles.A = calculateAngle('A');
      recordedAngles.B = calculateAngle('B');
      recordedAngles.C = calculateAngle('C');
      
      // Redraw all active arcs
      activeArcsVertices.forEach(vertex => {
        drawInteriorAngle(vertex, recordedAngles[vertex]);
      });
    }

    function updateAngleRecords() {
      recordedAngles.A = calculateAngle('A');
      recordedAngles.B = calculateAngle('B');
      recordedAngles.C = calculateAngle('C');
      
      document.getElementById('angle-a').textContent = `${recordedAngles.A}Â°`;
      document.getElementById('angle-b').textContent = `${recordedAngles.B}Â°`;
      document.getElementById('angle-c').textContent = `${recordedAngles.C}Â°`;
      
      const total = recordedAngles.A + recordedAngles.B + recordedAngles.C;
      document.getElementById('total-angle').textContent = `${total}Â°`;
    }

    function moveWalkerTo(x, y) {
      walker.style.transition = 'transform 0.8s ease-in-out';
      walker.setAttribute('transform', `translate(${x}, ${y})`);
    }

    function executeStep(step) {
      const state = states[step];
      statusText.textContent = state.status;
      angleDisplay.style.display = 'none';
      showingArcs = false;
      activeArcsVertices.clear();
      angleArcs.innerHTML = '';
      
      switch (state.action) {
        case 'start':
          moveWalkerTo(vertices.A.x, vertices.A.y);
          currentVertex = 'A';
          updateAngleRecords();
          break;
        case 'angle':
          showingArcs = true;
          const angle = calculateAngle(state.vertex);
          activeArcsVertices.add(state.vertex);
          angleDisplay.style.display = 'block';
          angleText.textContent = `å…§è§’ ${angle}Â°`;
          drawInteriorAngle(state.vertex, angle);
          statusText.textContent = `é ‚é» ${state.vertex} çš„å…§è§’æ˜¯ ${angle}Â°`;
          break;
        case 'arrive':
          if (state.position === 'B') {
            moveWalkerTo(vertices.B.x, vertices.B.y);
            currentVertex = 'B';
          } else if (state.position === 'C') {
            moveWalkerTo(vertices.C.x, vertices.C.y);
            currentVertex = 'C';
          }
          break;
        case 'complete':
          showingArcs = true;
          moveWalkerTo(vertices.A.x, vertices.A.y);
          currentVertex = 'A';
          activeArcsVertices.add('A');
          activeArcsVertices.add('B');
          activeArcsVertices.add('C');
          drawInteriorAngle('A', recordedAngles.A);
          drawInteriorAngle('B', recordedAngles.B);
          drawInteriorAngle('C', recordedAngles.C);
          discoveryBox.style.display = 'block';
          break;
      }
      
      updateButtons();
    }

    function updateButtons() {
      prevBtn.disabled = currentStep === 0;
      nextBtn.disabled = currentStep === states.length - 1;
      
      if (currentStep === states.length - 1) {
        nextBtn.textContent = 'âœ“ å®Œæˆ';
      } else {
        nextBtn.innerHTML = 'ä¸‹ä¸€æ­¥ <span>â–¶</span>';
      }
    }

    function reset() {
      vertices = {
        A: { x: 250, y: 76 },
        B: { x: 410, y: 310 },
        C: { x: 90, y: 310 }
      };
      currentStep = 0;
      currentVertex = 'A';
      showingArcs = false;
      activeArcsVertices.clear();
      angleArcs.innerHTML = '';
      discoveryBox.style.display = 'none';
      updateTrianglePath();
      updateAngleRecords();
      executeStep(0);
    }

    // Drag event handlers
    svg.addEventListener('mousedown', (e) => {
      if (e.target.classList.contains('draggable-vertex')) {
        isDragging = true;
        draggedVertex = e.target.id.split('-')[1].toUpperCase();
        e.target.style.cursor = 'grabbing';
      }
    });

    document.addEventListener('mousemove', (e) => {
      if (isDragging && draggedVertex) {
        const coords = getSVGCoordinates(e);
        const padding = 20;
        const x = Math.max(padding, Math.min(500 - padding, coords.x));
        const y = Math.max(padding, Math.min(400 - padding, coords.y));
        
        vertices[draggedVertex].x = x;
        vertices[draggedVertex].y = y;
        updateTrianglePath();
        updateAngleRecords();
        redrawAllActiveArcs();
      }
    });

    document.addEventListener('mouseup', () => {
      if (isDragging) {
        isDragging = false;
        if (draggedVertex) {
          document.getElementById(`vertex-${draggedVertex.toLowerCase()}`).style.cursor = 'grab';
        }
        draggedVertex = null;
      }
    });

    nextBtn.addEventListener('click', () => {
      if (currentStep < states.length - 1) {
        currentStep++;
        executeStep(currentStep);
      }
    });

    prevBtn.addEventListener('click', () => {
      if (currentStep > 0) {
        const targetStep = currentStep - 1;
        reset();
        for (let i = 0; i <= targetStep; i++) {
          currentStep = i;
          executeStep(i);
        }
      }
    });

    resetBtn.addEventListener('click', reset);

    function onConfigChange(config) {
      const title = config.main_title || defaultConfig.main_title;
      const instruction = config.instruction_text || defaultConfig.instruction_text;
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      
      document.getElementById('main-title').textContent = title;
      document.getElementById('instruction-text').textContent = instruction;
      document.getElementById('triangle-path').setAttribute('stroke', primaryColor);
      nextBtn.style.backgroundColor = primaryColor;
    }

    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.secondary_color || defaultConfig.secondary_color,
            set: (value) => {
              config.secondary_color = value;
              window.elementSdk.setConfig({ secondary_color: value });
            }
          },
          {
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (value) => {
              config.surface_color = value;
              window.elementSdk.setConfig({ surface_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              window.elementSdk.setConfig({ primary_color: value });
            }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => {
              config.accent_color = value;
              window.elementSdk.setConfig({ accent_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      return new Map([
        ['main_title', config.main_title || defaultConfig.main_title],
        ['instruction_text', config.instruction_text || defaultConfig.instruction_text]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    updateTrianglePath();
    updateAngleRecords();
    executeStep(0);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cc8eb14f4f906fc',t:'MTc3MDg2NjA5Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>